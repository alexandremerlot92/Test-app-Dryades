// Get referencesconst form = document.getElementById("stockForm");// Listen for form submissionform.addEventListener("submit", function(event) {  event.preventDefault();  const date = document.getElementById("date").value;  const cuvee = document.getElementById("cuvee").value;  const millesime = document.getElementById("millesime").value;  const quantite = document.getElementById("quantite").value;  const commentaire = document.getElementById("commentaire").value;  if (date && cuvee && millesime && quantite) {    const rowData = { date, cuvee, millesime, quantite, commentaire };    // Save to localStorage    const savedRows = JSON.parse(localStorage.getItem("stockRows")) || [];    savedRows.push(rowData);    localStorage.setItem("stockRows", JSON.stringify(savedRows));    // Reset the form fields    form.reset();    alert("Entrée ajoutée avec succès !");  } else {    alert("Veuillez remplir tous les champs obligatoires.");  }});function calculateAndDisplayFinalStock() {  const stockRows = JSON.parse(localStorage.getItem("stockRows")) || [];  const salesRows = JSON.parse(localStorage.getItem("salesRows")) || [];  const stockMap = {};  // Sum stock additions  stockRows.forEach(({ cuvee, millesime, quantite }) => {    const key = `${cuvee}-${millesime}`;    stockMap[key] = (stockMap[key] || 0) + parseInt(quantite);  });  // Subtract sales  salesRows.forEach(({ cuvee, millesime, quantite }) => {    const key = `${cuvee}-${millesime}`;    stockMap[key] = (stockMap[key] || 0) - parseInt(quantite);  });  // Populate the table  const tbody = document.querySelector("#finalStockTable tbody");  tbody.innerHTML = ""; // clear existing  for (const key in stockMap) {    const [cuvee, millesime] = key.split("-");    const row = document.createElement("tr");    row.innerHTML = `      <td>${cuvee}</td>      <td>${millesime}</td>      <td>${stockMap[key]}</td>    `;    tbody.appendChild(row);  }}document.addEventListener("DOMContentLoaded", () => {  calculateAndDisplayFinalStock();});